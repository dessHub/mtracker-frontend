<!Doctype html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Maintenance Tracker App</title>
        <link rel="stylesheet" href="assets/css/styles.css">
        
    </head>
    <body>
        <div class="nav"> <!-- Navigation Menu Starts -->
            <label for="show-menu" class="show-menu">Show Menu</label>
            <input type="checkbox" id="show-menu" role="button">
         
            <ul id="menu">
                
               <li id="logo"><a href="index.html">Maintenance</a></li>
                           
               <li><a href="index.html">Home</a></li>
               <li><a nohref id="reqs">My Requests </a></li>
               <li><a nohref id="reqForm">Request Service </a></li>
               <li id="login"><a href="index.html">Log Out</a></li> 
            </ul>
        </div> <!-- navigation menu ends -->

        <!--
            page content start
        -->
        <div class="cover">
         <div class="content">
            <div class="page-title">
                <h3>My Requests History</h3>
                <p id="flash"></p>
            </div>
            
            <div class="request">
               <table id="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Type</th>
                      <th>Location</th>
                      <th>Description</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  
                  <tbody>
                    <tr>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td><a href="request.html"></a> </td>
                      <td id="status-pending"></td>
                    </tr>
                     
                  </tbody>

               </table>
               <div >
                    <a href="request-form.html"><button class="btn-success">Place A New Request</button></a>
                </div>
            </div>
         </div>
        </div>

        <script type="text/javascript">
        window.onload = function() {
            let data = JSON.parse(localStorage.getItem("reqList"));
            console.log(data[0].date)

            let table = document.getElementById('table');          

            for(let i = 0; i < data.length; i++){
                // create a table row
                let new_row = table.insertRow();
                
                // create a table cell
                let no = new_row.insertCell(0);
                let category = new_row.insertCell(1);
                let location = new_row.insertCell(2);
                let description = new_row.insertCell(3);
                let status = new_row.insertCell(4);

                //add value to cell
                no.innerHTML = i+1;
                category.innerHTML = data[i].category;
                location.innerHTML = data[i].location;
                description.innerHTML ='<a href="request.html">'+ data[i].description + '</a>';
                if(data[i].status == "Pending"){
                    status.innerHTML = '<span id="status-pending">' + data[i].status + '</span>';
                }else if(data[i].status == "Resolved"){
                    status.innerHTML = '<span id="status-resolved">' + data[i].status + '</span>';
                }else{
                    status.innerHTML = '<span id="status-cancelled">' + data[i].status + '</span>';
                }
                
                
            }

        }
        </script>

    </body>
</html>